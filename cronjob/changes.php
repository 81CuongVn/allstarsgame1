<?php
require '_config.php';

$character	= 183;
$uids		= [ 5, 153, 224, 235, 314, 323, 400, 513, 564, 594, 618, 867, 974, 1040, 1069, 1143, 1188, 1404, 1415, 1464, 1585, 1671, 1792, 1939, 2179, 2526, 2686, 2713, 2761, 3079, 3942, 4288, 4500, 4690, 5184, 5186, 5729, 5927, 6254, 7028, 7879, 8144, 8348, 8615, 9954, 10172, 11987, 12330, 12584, 13725, 14556, 14858, 15769, 15841, 19197, 19708, 20740, 22372, 23657, 24364, 26879, 27093, 27428, 27642, 27969, 30061, 31077, 32312, 33918, 34324, 35081, 35199, 37442, 38660, 41896, 43296, 45304, 45540, 45699, 46423, 46840, 48435, 49955, 50229, 51216, 53711, 58354, 59199, 59246, 60020, 60162, 62331, 63346, 65154, 65588, 65919, 65966, 66393, 72392, 74761, 74842, 75016, 75670, 75701, 75819, 75827, 75840, 75841, 76450, 76641, 76930, 77040, 77483, 77631, 78191, 78990, 79412, 79697, 80199, 80286, 80695, 80992, 81067, 81465, 81468, 81479, 81480, 81481, 81482, 81483, 81490, 81491, 81493, 81496, 81497, 81499, 81502, 81503, 81504, 81505, 81508, 81512, 81513, 81514, 81515, 81522, 81523, 81524, 81525, 81526, 81527, 81531, 81532, 81533, 81534, 81535, 81537, 81539, 81540, 81541, 81543, 81545, 81546, 81548, 81550, 81555, 81557, 81561, 81563, 81564, 81565, 81566, 81567, 81568, 81572, 81573, 81575, 81576, 81577, 81578, 81580, 81581, 81582, 81583, 81584, 81585, 81586, 81588, 81589, 81590, 81591, 81594, 81595, 81597, 81598, 81599, 81600, 81602, 81604, 81605, 81606, 81607, 81608, 81610, 81611, 81613, 81614, 81616, 81617, 81619, 81620, 81622, 81624, 81628, 81629, 81630, 81631, 81632, 81633, 81634, 81635, 81638, 81639, 81640, 81641, 81642, 81644, 81645, 81646, 81647, 81649, 81651, 81652, 81653, 81654, 81655, 81656, 81657, 81658, 81660, 81661, 81662, 81663, 81664, 81665, 81666, 81667, 81668, 81669, 81670, 81673, 81675, 81676, 81680, 81681, 81686, 81687, 81688, 81689, 81690, 81692, 81694, 81695, 81696, 81698, 81699, 81700, 81702, 81703, 81704, 81706, 81709, 81710, 81711, 81713, 81716, 81717, 81719, 81721, 81722, 81723, 81724, 81725, 81726, 81727, 81728, 81729, 81730, 81733, 81734, 81735, 81736, 81737, 81740, 81741, 81742, 81743, 81745, 81747, 81748, 81750, 81752, 81754, 81755, 81756, 81758, 81760, 81761, 81762, 81763, 81765, 81766, 81767, 81771, 81772, 81773, 81774, 81775, 81776, 81777, 81778, 81779, 81780, 81781, 81782, 81783, 81784, 81785, 81786, 81787, 81789, 81791, 81792, 81795, 81796, 81797, 81798, 81799, 81800, 81801, 81802, 81803, 81804, 81807, 81809, 81810, 81811, 81812, 81813, 81814, 81815, 81817, 81819, 81821, 81822, 81823, 81825, 81826, 81827, 81829, 81830, 81834, 81835, 81836, 81838, 81839, 81840, 81842, 81843, 81844, 81846, 81850, 81851, 81853, 81854, 81855, 81856, 81859, 81861, 81862, 81863, 81864, 81865, 81867, 81868, 81869, 81870, 81871, 81872, 81874, 81875, 81876, 81877, 81879, 81880, 81882, 81883, 81884, 81885, 81886, 81887, 81889, 81890, 81892, 81893, 81895, 81896, 81897, 81900, 81902, 81903, 81904, 81906, 81907, 81909, 81910, 81911, 81912, 81913, 81916, 81918, 81922, 81923, 81924, 81925, 81926, 81928, 81931, 81932, 81933, 81934, 81936, 81937, 81938, 81939, 81941, 81942, 81943, 81944, 81946, 81948, 81949, 81950, 81951, 81952, 81953, 81954, 81957, 81959, 81960, 81961, 81963, 81964, 81967, 81968, 81969, 81970, 81971, 81972, 81974, 81975, 81976, 81978, 81980, 81981, 81983, 81984, 81987, 81988, 81990, 81992, 81996, 81998, 82000, 82001, 82002, 82005, 82008, 82009, 82010, 82011, 82012, 82013, 82014, 82015, 82017, 82018, 82019, 82020 ];
$users		= User::find('id in (' . implode(', ', $uids) . ')');
foreach ($users as $user) {
	if (!$user->is_character_bought($character)) {
		$reward_character				= new UserCharacter();
		$reward_character->user_id		= $user->id;
		$reward_character->character_id	= $character;
		$reward_character->was_reward	= 1;
		$reward_character->save();
	}
}

exit;
Recordset::update('users', [
	'vip'		=> 0,
	'credits'	=> 0
]);

$donates = StarPurchase::find("status = 'aprovado'");
foreach ($donates as $donate) {
	$user		= $donate->user();
	$plan		= $donate->plan();
	$credits	= $donate->isDouble() ? ($plan->credits * 2) : $plan->credits;

	if (!$user->vip) {
		$user->vip	= 1;
	}

	$user->credits	+= $credits;
	$user->save();
}

echo "[CRON] Cron executada com sucesso!\n";
